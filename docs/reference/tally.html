<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Tabulate categorical data — tally • mosaicCore</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Tabulate categorical data — tally" />
<meta property="og:description" content="Tabulate categorical data" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosaicCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ProjectMOSAIC/mosaicCore/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tabulate categorical data</h1>
    <small class="dont-index">Source: <a href='https://github.com/ProjectMOSAIC/mosaicCore/blob/master/R/tally.R'><code>R/tally.R</code></a></small>
    <div class="hidden name"><code>tally.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Tabulate categorical data</p>
    </div>

    <pre class="usage"><span class='fu'>tally</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for tbl</span>
<span class='fu'>tally</span>(<span class='no'>x</span>, <span class='no'>wt</span>, <span class='kw'>sort</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>, <span class='kw'>envir</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span>())

<span class='co'># S3 method for data.frame</span>
<span class='fu'>tally</span>(<span class='no'>x</span>, <span class='no'>wt</span>, <span class='kw'>sort</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>, <span class='kw'>envir</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span>())

<span class='co'># S3 method for formula</span>
<span class='fu'>tally</span>(
  <span class='no'>x</span>,
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sys.parent.html'>parent.frame</a></span>(),
  <span class='kw'>format</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"count"</span>, <span class='st'>"proportion"</span>, <span class='st'>"percent"</span>, <span class='st'>"data.frame"</span>, <span class='st'>"sparse"</span>, <span class='st'>"default"</span>),
  <span class='kw'>margins</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='no'>subset</span>,
  <span class='kw'>groups</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>useNA</span> <span class='kw'>=</span> <span class='st'>"ifany"</span>,
  <span class='kw'>groups.first</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to <code><a href='https://rdrr.io/r/base/table.html'>table()</a></code></p></td>
    </tr>
    <tr>
      <th>wt</th>
      <td><p>for weighted tallying,
see <code><a href='https://dplyr.tidyverse.org/reference/count.html'>dplyr::tally()</a></code> in <span class="pkg">dplyr</span></p></td>
    </tr>
    <tr>
      <th>sort</th>
      <td><p>a logical,
see <code><a href='https://dplyr.tidyverse.org/reference/count.html'>dplyr::tally()</a></code> in <span class="pkg">dplyr</span></p></td>
    </tr>
    <tr>
      <th>envir</th>
      <td><p>an environment in which to evaluate</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>a data frame or environment in which evaluation occurs.
Note that the default is <code>data=parent.frame()</code>.  This makes it convenient to
use this function interactively by treating the working envionment as if it were
a data frame.  But this may not be appropriate for programming uses.
When programming, it is best to use an explicit <code>data</code> argument
-- ideally supplying a data frame that contains the variables mentioned</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>a character string describing the desired format of the results.
One of <code>'default'</code>, <code>'count'</code>, <code>'proportion'</code>, <code>'percent'</code>,
<code>'data.frame'</code>, <code>'sparse'</code>, or <code>'default'</code>.
In case of <code>'default'</code>, counts are used unless there is a condition, in
which case proportions are used instead.  Note that prior to version 0.9.3,
<code>'default'</code> was the default, now it is <code>'count'</code>.
<code>'data.frame'</code> converts the table to a data frame with one row per cell;
<code>'sparse'</code> additionally removes any rows with 0 counts.</p></td>
    </tr>
    <tr>
      <th>margins</th>
      <td><p>a logical indicating whether marginal distributions should be displayed.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>a logical indicating whether messages about order in which
marginal distributions are calculated should be suppressed.
See <code><a href='https://rdrr.io/r/stats/addmargins.html'>stats::addmargins()</a></code>.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>an expression evaluating to a logical vector used to select a subset of <code>data</code></p></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>used to specify a condition as an alternative to using a formula
with a condition.</p></td>
    </tr>
    <tr>
      <th>useNA</th>
      <td><p>as in <code><a href='https://rdrr.io/r/base/table.html'>table()</a></code>, but the default here is <code>"ifany"</code>.</p></td>
    </tr>
    <tr>
      <th>groups.first</th>
      <td><p>a logical indicating whether groups should be inserted
ahead of the condition (else after).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A object of class <code>"table"</code>, unless passing through to <span class="pkg">dplyr</span>
or converted to a data frame because <code>format</code> is <code>"data.frame"</code> or
<code>"sparse"</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <span class="pkg">dplyr</span> package also exports a <code><a href='https://dplyr.tidyverse.org/reference/count.html'>dplyr::tally()</a></code> function.
If <code>x</code> inherits from class <code>"tbl"</code> or <code>"data frame"</code>,
then <span class="pkg">dplyr</span>'s <code><a href='https://dplyr.tidyverse.org/reference/count.html'>dplyr::tally()</a></code> is called.  This makes it
easier to have the two packages coexist.</p>
<p>Otherwise, <code>tally()</code> is designed as an alternative to <code><a href='https://rdrr.io/r/base/table.html'>table()</a></code> and
<code><a href='https://rdrr.io/r/stats/xtabs.html'>xtabs()</a></code>.  The primary use case it to describe a (possibly multi-dimensional)
table using a formula.  For a table of counts, each component of the formula becomes one
of the dimensions of the cross table.  For tables of proportions or percents, conditional
proportions and percents are computed, conditioned on each level of all "secondary"
(i.e., conditioning) variables, defined as everything other than the left hand side,
if there is a left hand side to the formula; and everything except the right hand side
if the left hand side of the formula is empty.  Note that <code>groups</code> is folded into
the formula prior to this determination and becomes part of the conditioning.</p>
<p>When marginal totals are added, they are added for all of the conditioning dimensions, and
proportions should sum to 1 for each level of the conditioning variables.  This can be
useful to make it clear which conditional proportions are being computed.</p>
<p>See the examples for some typical use cases.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The current implementation when <code>format = "sparse"</code> first creates the full data frame
and then removes the unneeded rows.  So the savings is in terms of space, not time.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>mosaicData</span>)) {
<span class='fu'>tally</span>( ~ <span class='no'>substance</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>)
<span class='fu'>tally</span>( ~ <span class='no'>substance</span> + <span class='no'>sex</span> , <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>)
<span class='fu'>tally</span>( <span class='no'>sex</span> ~ <span class='no'>substance</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>)   <span class='co'># equivalent to tally( ~ sex | substance, ... )</span>
<span class='fu'>tally</span>( ~ <span class='no'>substance</span> <span class='kw'>|</span> <span class='no'>sex</span> , <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>)
<span class='fu'>tally</span>( ~ <span class='no'>substance</span> <span class='kw'>|</span> <span class='no'>sex</span> , <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='st'>'count'</span>, <span class='kw'>margins</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>tally</span>( ~ <span class='no'>substance</span> + <span class='no'>sex</span> , <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='st'>'percent'</span>, <span class='kw'>margins</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>tally</span>( ~ <span class='no'>substance</span> <span class='kw'>|</span> <span class='no'>sex</span> , <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='st'>'percent'</span>, <span class='kw'>margins</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'># force NAs to show up</span>
<span class='fu'>tally</span>( ~ <span class='no'>sex</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='kw'>useNA</span> <span class='kw'>=</span> <span class='st'>"always"</span>)
<span class='co'># show NAs if any are there</span>
<span class='fu'>tally</span>( ~ <span class='no'>link</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>)
<span class='co'># ignore the NAs</span>
<span class='fu'>tally</span>( ~ <span class='no'>link</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='kw'>useNA</span> <span class='kw'>=</span> <span class='st'>"no"</span>)
}</div><div class='output co'>#&gt; link
#&gt;  no yes 
#&gt; 268 163 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Randall Pruim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



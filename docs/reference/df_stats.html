<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate statistics for "response" variables — df_stats • mosaicCore</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate statistics for " response variables df_stats><meta property="og:description" content="Creates a data frame of statistics calculated on one or more response variables,
possibly for each group formed by combinations of additional variables.
The resulting data frame has one column
for each of the statistics requested as well as columns for any grouping variables and a
column identifying the response variable for which the statistics was calculated."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosaicCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ProjectMOSAIC/mosaicCore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate statistics for "response" variables</h1>
    <small class="dont-index">Source: <a href="https://github.com/ProjectMOSAIC/mosaicCore/blob/HEAD/R/df_stats.R" class="external-link"><code>R/df_stats.R</code></a></small>
    <div class="hidden name"><code>df_stats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a data frame of statistics calculated on one or more response variables,
possibly for each group formed by combinations of additional variables.
The resulting data frame has one column
for each of the statistics requested as well as columns for any grouping variables and a
column identifying the response variable for which the statistics was calculated.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">df_stats</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  drop <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  fargs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wide"</span>, <span class="st">"long"</span><span class="op">)</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  long_names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nice_names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  na.action <span class="op">=</span> <span class="st">"na.warn"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A formula indicating which variables are to be used.
Semantics are approximately as in <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> since <code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">stats::model.frame()</a></code>
is used to turn the formula into a data frame.  But first conditions and <code>groups</code>
are re-expressed into a form that <code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">stats::model.frame()</a></code> can interpret.
Multiple response variables can be separated by <code>+</code> on the left hand side of
the formula.  A one-sided formula <code>~ rhs | cond</code> is treated as <code>rhs ~ 1 | cond</code>.
See details.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or list containing the variables.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Functions used to compute the statistics.  If this is empty,
a default set of summary statistics is used.  Functions used must accept
a vector of values and return either a (possibly named) single value,
a (possibly named) vector of values, or a data frame with one row.
Functions can be specified with character strings, names, or expressions
that look like function calls with the first argument missing.  The latter
option provides a convenient way to specify additional arguments.  See the
examples.
Note: If these arguments are named, those names will be used in the data
frame returned (see details).  Such names may not be among the names of the named
arguments of <code>df_stats</code>().</p>
<p>If a function is specified using <code>::</code>, be sure to include the trailing
parens, even if there are no additional arguments required.</p></dd>


<dt id="arg-drop">drop<a class="anchor" aria-label="anchor" href="#arg-drop"></a></dt>
<dd><p>A logical indicating whether combinations of the grouping
variables that do not occur in <code>data</code> should be dropped from the
result.</p></dd>


<dt id="arg-fargs">fargs<a class="anchor" aria-label="anchor" href="#arg-fargs"></a></dt>
<dd><p>Arguments passed to the functions in <code>...</code>.</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>A character string to separate components of names.  Set to <code>""</code> if
you don't want separation.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>One of <code>"long"</code> or <code>"wide"</code> indicating the desired shape of the
returned data frame.</p></dd>


<dt id="arg-groups">groups<a class="anchor" aria-label="anchor" href="#arg-groups"></a></dt>
<dd><p>An expression or formula to be evaluated in <code>data</code> and defining (additional) groups.
This isn't necessary, since these can be placed into the formula, but it is provided
for similarity to other functions from the <span class="pkg">mosaic</span> package.</p></dd>


<dt id="arg-long-names">long_names<a class="anchor" aria-label="anchor" href="#arg-long-names"></a></dt>
<dd><p>A logical indicating whether the default names should include the name
of the variable being summarized as well as the summarizing function name in the default
case when names are not derived from the names of the returned object or
an argument name.</p></dd>


<dt id="arg-nice-names">nice_names<a class="anchor" aria-label="anchor" href="#arg-nice-names"></a></dt>
<dd><p>A logical indicating whether <code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names()</a></code> should be
used to force names of the returned data frame to by syntactically valid.</p></dd>


<dt id="arg-na-action">na.action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>A function (or character string naming a function) that determines how NAs are treated.
Options include <code>"na.warn"</code> which removes missing data and emits a warning,
<code>"na.pass"</code> which includes all of the data,
<code>"na.omit"</code> or <code>"na.exclude"</code> which silently discard missing data,
and <code>"na.fail"</code> which fails if there is missing data.
See <code>link[stats]{na.pass}()</code> and <code><a href="na.warn.html">na.warn()</a></code> for details.
The default is <code>"na.warn"</code> unless no function are specified in <code>...</code>, in which case
<code>"na.pass"</code> is used since the default function reports the number of missing values.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame. Names of columns in the resulting data frame consist of three
parts separated by <code>sep</code>.
The first part is the argument name, if it exists, else the function.
The second part is the name of the variable being summarised if <code>long_names == TRUE</code> and
the first part is the function name, else ""
The third part is the names of the object returned by the summarizing function, if they
exist, else a sequence of consecutive integers or "" if there is only one component
returned by the summarizing function.
See the examples.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Use a one-sided formula to compute summary statistics for the right hand side
expression over the entire data.
Use a two-sided formula to compute summary statistics for the left hand (response)
expression(s) for each combination of levels of the expressions occurring on the
right hand side.
This is most useful when the left hand side is quantitative and each expression
on the right hand side has relatively few unique values.  A function like
<code><a href="https://www.mosaic-web.org/mosaic/reference/ntiles.html" class="external-link">mosaic::ntiles()</a></code> is often useful to create a few groups of roughly equal size
determined by ranges of a quantitative variable.  See the examples.</p>
<p>Note that unlike <code>dplyr::<a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a>()</code>, <code>df_stats()</code> ignores
any grouping defined in <code>data</code> if <code>data</code> is a grouped <code>tibble</code>.</p>
    </div>
    <div id="cautions-regarding-formulas">
    <h2>Cautions Regarding Formulas</h2>



<p>The use of <code>|</code> to define groups is tricky because (a) <code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">stats::model.frame()</a></code>
doesn't handle this sort of thing and (b) <code>|</code> is also used for logical or.  The
current algorithm for handling this will turn the first  occurrence of <code>|</code> into an attempt
to condition, so logical or cannot be used before conditioning in the formula.
If you have need of logical or, we suggest creating a new variable that contains the
results of evaluating the expression.</p>
<p>Similarly, addition (<code>+</code>) is used to separate grouping variables, not for
arithmetic.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response min   Q1 median  Q3 max     mean       sd  n missing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp  52 96.5    123 180 335 146.6875 68.56287 32       0</span>
<span class="r-in"><span><span class="co"># There are several ways to specify functions</span></span></span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, trimmed_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span>trim <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>, <span class="st">"median"</span>,</span></span>
<span class="r-in"><span>  <span class="va">range</span>, Q <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response     mean trimmed_mean median range_1 range_2 Q_25% Q_75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp 146.6875     141.1923    123      52     335  96.5   180</span>
<span class="r-in"><span><span class="co"># When using ::, be sure to include parens, even if there are no additional arguments.</span></span></span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span>, mean <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">)</span>, trimmed_mean <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span>trim <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response     mean trimmed_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp 146.6875     141.1923</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># force names to by syntactically valid</span></span></span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span>, Q <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span>, nice_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response Q_25. Q_75.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp  96.5   180</span>
<span class="r-in"><span><span class="co"># longer names</span></span></span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="op">~</span> <span class="va">hp</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, trimmed_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span>trim <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>, <span class="st">"median"</span>, <span class="va">range</span>,</span></span>
<span class="r-in"><span>  long_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response  mean_hp trimmed_mean median_hp range_hp_1 range_hp_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp 146.6875     141.1923       123         52        335</span>
<span class="r-in"><span><span class="co"># wide vs long format</span></span></span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response cyl      mean median range_1 range_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp   4  82.63636   91.0      52     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       hp   6 122.28571  110.0     105     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       hp   8 209.21429  192.5     150     335</span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response cyl       mean  median range_1 range_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp   4  82.636364  91.000  52.000 113.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       hp   6 122.285714 110.000 105.000 175.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       hp   8 209.214286 192.500 150.000 335.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       wt   4   2.285727   2.200   1.513   3.190</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       wt   6   3.117143   3.215   2.620   3.460</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       wt   8   3.999214   3.755   3.170   5.424</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      mpg   4  26.663636  26.000  21.400  33.900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      mpg   6  19.742857  19.700  17.800  21.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      mpg   8  15.100000  15.200  10.400  19.200</span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span>, format <span class="op">=</span> <span class="st">"long"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    response   cyl stat    value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> hp           4 mean     82.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> hp           4 median   91  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> hp           4 range_1  52  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> hp           4 range_2 113  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> hp           6 mean    122. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> hp           6 median  110  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> hp           6 range_1 105  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> hp           6 range_2 175  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> hp           8 mean    209. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> hp           8 median  192. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> hp           8 range_1 150  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> hp           8 range_2 335  </span>
<span class="r-in"><span><span class="co"># More than one grouping variable -- 4 ways.</span></span></span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response cyl gear     mean median range_1 range_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp   4    3  97.0000   97.0      97      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       hp   6    3 107.5000  107.5     105     110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       hp   8    3 194.1667  180.0     150     245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       hp   4    4  76.0000   66.0      52     109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       hp   6    4 116.5000  116.5     110     123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       hp   4    5 102.0000  102.0      91     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       hp   6    5 175.0000  175.0     175     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       hp   8    5 299.5000  299.5     264     335</span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">|</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response cyl gear     mean median range_1 range_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp   4    3  97.0000   97.0      97      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       hp   6    3 107.5000  107.5     105     110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       hp   8    3 194.1667  180.0     150     245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       hp   4    4  76.0000   66.0      52     109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       hp   6    4 116.5000  116.5     110     123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       hp   4    5 102.0000  102.0      91     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       hp   6    5 175.0000  175.0     175     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       hp   8    5 299.5000  299.5     264     335</span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, groups <span class="op">=</span> <span class="op">~</span><span class="va">gear</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response cyl gear     mean median range_1 range_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp   4    3  97.0000   97.0      97      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       hp   6    3 107.5000  107.5     105     110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       hp   8    3 194.1667  180.0     150     245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       hp   4    4  76.0000   66.0      52     109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       hp   6    4 116.5000  116.5     110     123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       hp   4    5 102.0000  102.0      91     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       hp   6    5 175.0000  175.0     175     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       hp   8    5 299.5000  299.5     264     335</span>
<span class="r-in"><span><span class="fu">df_stats</span><span class="op">(</span> <span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, groups <span class="op">=</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response cyl gear     mean median range_1 range_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       hp   4    3  97.0000   97.0      97      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       hp   6    3 107.5000  107.5     105     110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       hp   8    3 194.1667  180.0     150     245</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       hp   4    4  76.0000   66.0      52     109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       hp   6    4 116.5000  116.5     110     123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       hp   4    5 102.0000  102.0      91     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       hp   6    5 175.0000  175.0     175     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       hp   8    5 299.5000  299.5     264     335</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># because the result is a data frame, df_stats() is also useful for creating plots</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ProjectMOSAIC/ggformula" class="external-link">ggformula</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/ggformula/man/gf_violin.html" class="external-link">gf_violin</a></span><span class="op">(</span><span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, group <span class="op">=</span> <span class="op">~</span> <span class="va">cyl</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/ggformula/man/gf_point.html" class="external-link">gf_point</a></span><span class="op">(</span><span class="va">mean</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="fu">df_stats</span><span class="op">(</span><span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">mean</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="op">~</span> <span class="st">"mean"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/ggformula/man/gf_point.html" class="external-link">gf_point</a></span><span class="op">(</span><span class="va">median</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="fu">df_stats</span><span class="op">(</span><span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, data <span class="op">=</span> <span class="va">mtcars</span>, <span class="va">median</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="op">~</span><span class="st">"median"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/ggformula/man/gf_aux.html" class="external-link">gf_labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: ggformula</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: ggplot2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: scales</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: ggridges</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New to ggformula?  Try the tutorials: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	learnr::run_tutorial("introduction", package = "ggformula")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	learnr::run_tutorial("refining", package = "ggformula")</span>
<span class="r-plt img"><img src="df_stats-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># magrittr style piping is also supported</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ProjectMOSAIC/ggformula" class="external-link">ggformula</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">mtcars</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">df_stats</span><span class="op">(</span><span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mtcars</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu">df_stats</span><span class="op">(</span><span class="va">hp</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">gear</span>, <span class="va">mean</span>, <span class="va">median</span>, <span class="va">range</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/ggformula/man/gf_point.html" class="external-link">gf_point</a></span><span class="op">(</span><span class="va">mean</span> <span class="op">~</span> <span class="va">cyl</span>, color <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/ggformula/man/gf_line.html" class="external-link">gf_line</a></span><span class="op">(</span><span class="va">mean</span> <span class="op">~</span> <span class="va">cyl</span>, color <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="df_stats-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># can be used with a categorical response, too</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ProjectMOSAIC/mosaic" class="external-link">mosaic</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">df_stats</span><span class="op">(</span><span class="va">sex</span> <span class="op">~</span> <span class="va">substance</span>, data <span class="op">=</span> <span class="va">HELPrct</span>, <span class="va">table</span>, prop_female <span class="op">=</span> <span class="va">prop</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: mosaic</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Registered S3 method overwritten by 'mosaic':</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   method                           from   </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   fortify.SpatialPolygonsDataFrame ggplot2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The 'mosaic' package masks several functions from core packages in order to add </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> additional features.  The original behavior of these functions should not be affected by this.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘mosaic’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:dplyr’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     count, do, tally</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:Matrix’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     mean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:scales’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     rescale</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:ggplot2’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     stat</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     IQR, binom.test, cor, cor.test, cov, fivenum, median, prop.test,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     quantile, sd, t.test, var</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     max, mean, min, prod, range, sample, sum</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response substance female male prop_female_prop_female</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      sex   alcohol     36  141               0.2033898</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      sex   cocaine     41  111               0.2697368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      sex    heroin     30   94               0.2419355</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ProjectMOSAIC/mosaic" class="external-link">mosaic</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">df_stats</span><span class="op">(</span><span class="va">sex</span> <span class="op">~</span> <span class="va">substance</span>, data <span class="op">=</span> <span class="va">HELPrct</span>, <span class="va">table</span>, <span class="va">props</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   response substance female male prop_female prop_male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      sex   alcohol     36  141   0.2033898 0.7966102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      sex   cocaine     41  111   0.2697368 0.7302632</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      sex    heroin     30   94   0.2419355 0.7580645</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Randall Pruim, Daniel T. Kaplan, Nicholas J. Horton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>


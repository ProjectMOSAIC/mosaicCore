<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate statistics for "response" variables — df_stats • mosaicCore</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate statistics for "response" variables — df_stats" />
<meta property="og:description" content="Creates a data frame of statistics calculated on one or more response variables,
possibly for each group formed by combinations of additional variables.
The resulting data frame has one column
for each of the statistics requested as well as columns for any grouping variables and a
column identifying the response variable for which the statistics was calculated." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosaicCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ProjectMOSAIC/mosaicCore/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate statistics for "response" variables</h1>
    <small class="dont-index">Source: <a href='https://github.com/ProjectMOSAIC/mosaicCore/blob/master/R/df_stats.R'><code>R/df_stats.R</code></a></small>
    <div class="hidden name"><code>df_stats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a data frame of statistics calculated on one or more response variables,
possibly for each group formed by combinations of additional variables.
The resulting data frame has one column
for each of the statistics requested as well as columns for any grouping variables and a
column identifying the response variable for which the statistics was calculated.</p>
    </div>

    <pre class="usage"><span class='fu'>df_stats</span>(
  <span class='no'>formula</span>,
  <span class='no'>data</span>,
  <span class='no'>...</span>,
  <span class='kw'>drop</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>fargs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"_"</span>,
  <span class='kw'>format</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"wide"</span>, <span class='st'>"long"</span>),
  <span class='kw'>groups</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>long_names</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>nice_names</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>na.action</span> <span class='kw'>=</span> <span class='st'>"na.warn"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>A formula indicating which variables are to be used.
Semantics are approximately as in <code><a href='https://rdrr.io/r/stats/lm.html'>lm()</a></code> since <code><a href='https://rdrr.io/r/stats/model.frame.html'>stats::model.frame()</a></code>
is used to turn the formula into a data frame.  But first conditions and <code>groups</code>
are re-expressed into a form that <code><a href='https://rdrr.io/r/stats/model.frame.html'>stats::model.frame()</a></code> can interpret.
Multiple response variables can be separated by <code>+</code> on the left hand side of
the formula.  A one-sided formula <code>~ rhs | cond</code> is treated as <code>rhs ~ 1 | cond</code>.
See details.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A data frame or list containing the variables.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Functions used to compute the statistics.  If this is empty,
a default set of summary statistics is used.  Functions used must accept
a vector of values and return either a (possibly named) single value,
a (possibly named) vector of values, or a data frame with one row.
Functions can be specified with character strings, names, or expressions
that look like function calls with the first argument missing.  The latter
option provides a convenient way to specify additional arguments.  See the
examples.
Note: If these arguments are named, those names will be used in the data
frame returned (see details).  Such names may not be among the names of the named
arguments of <code>df_stats</code>().</p>
<p>If a function is specified using <code>::</code>, be sure to include the trailing
parens, even if there are no additional arguments required.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>A logical indicating whether combinations of the grouping
variables that do not occur in <code>data</code> should be dropped from the
result.</p></td>
    </tr>
    <tr>
      <th>fargs</th>
      <td><p>Arguments passed to the functions in <code>...</code>.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>A character string to separate components of names.  Set to <code>""</code> if
you don't want separation.</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>One of <code>"long"</code> or <code>"wide"</code> indicating the desired shape of the
returned data frame.</p></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>An expression or formula to be evaluated in <code>data</code> and defining (additional) groups.
This isn't necessary, since these can be placed into the formula, but it is provided
for similarity to other functions from the <span class="pkg">mosaic</span> package.</p></td>
    </tr>
    <tr>
      <th>long_names</th>
      <td><p>A logical indicating whether the default names should include the name
of the variable being summarized as well as the summarizing function name in the default
case when names are not derived from the names of the returned object or
an argument name.</p></td>
    </tr>
    <tr>
      <th>nice_names</th>
      <td><p>A logical indicating whether <code><a href='https://rdrr.io/r/base/make.names.html'>make.names()</a></code> should be
used to force names of the returned data frame to by syntactically valid.</p></td>
    </tr>
    <tr>
      <th>na.action</th>
      <td><p>A function (or character string naming a function) that determines how NAs are treated.
Options include <code>"na.warn"</code> which removes missing data and emits a warning,
<code>"na.pass"</code> which includes all of the data,
<code>"na.omit"</code> or <code>"na.exclude"</code> which silently discard missing data,
and <code>"na.fail"</code> which fails if there is missing data.
See <code>link[stats]{na.pass}()</code> and <code><a href='na.warn.html'>na.warn()</a></code> for details.
The default is <code>"na.warn"</code> unless no function are specified in <code>...</code>, in which case
<code>"na.pass"</code> is used since the default function reports the number of missing values.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame. Names of columns in the resulting data frame consist of three
parts separated by <code>sep</code>.
The first part is the argument name, if it exists, else the function.
The second part is the name of the variable being summarised if <code>long_names == TRUE</code> and
the first part is the function name, else ""
The third part is the names of the object returned by the summarizing function, if they
exist, else a sequence of consecutive integers or "" if there is only one component
returned by the summarizing function.
See the examples.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Use a one-sided formula to compute summary statistics for the right hand side
expression over the entire data.
Use a two-sided formula to compute summary statistics for the left hand (response)
expression(s) for each combination of levels of the expressions occurring on the
right hand side.
This is most useful when the left hand side is quantitative and each expression
on the right hand side has relatively few unique values.  A function like
<code><a href='https://rdrr.io/pkg/mosaic/man/ntiles.html'>mosaic::ntiles()</a></code> is often useful to create a few groups of roughly equal size
determined by ranges of a quantitative variable.  See the examples.</p>
<p>Note that unlike <code>dplyr::<a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a>()</code>, <code>df_stats()</code> ignores
any grouping defined in <code>data</code> if <code>data</code> is a grouped <code>tibble</code>.</p>
    <h2 class="hasAnchor" id="cautions-regarding-formulas"><a class="anchor" href="#cautions-regarding-formulas"></a>Cautions Regarding Formulas</h2>

    


<p>The use of <code>|</code> to define groups is tricky because (a) <code><a href='https://rdrr.io/r/stats/model.frame.html'>stats::model.frame()</a></code>
doesn't handle this sort of thing and (b) <code>|</code> is also used for logical or.  The
current algorithm for handling this will turn the first  occurrence of <code>|</code> into an attempt
to condition, so logical or cannot be used before conditioning in the formula.
If you have need of logical or, we suggest creating a new variable that contains the
results of evaluating the expression.</p>
<p>Similarly, addition (<code>+</code>) is used to separate grouping variables, not for
arithmetic.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>df_stats</span>( ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)</div><div class='output co'>#&gt;   response min   Q1 median  Q3 max     mean       sd  n missing
#&gt; 1       hp  52 96.5    123 180 335 146.6875 68.56287 32       0</div><div class='input'><span class='co'># There are several ways to specify functions</span>
<span class='fu'>df_stats</span>( ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='kw'>trimmed_mean</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>0.1</span>), <span class='st'>"median"</span>,
  <span class='no'>range</span>, <span class='kw'>Q</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.25</span>, <span class='fl'>0.75</span>)))</div><div class='output co'>#&gt;   response     mean trimmed_mean median range_1 range_2 Q_25% Q_75%
#&gt; 1       hp 146.6875     141.1923    123      52     335  96.5   180</div><div class='input'><span class='co'># When using ::, be sure to include parens, even if there are no additional arguments.</span>
<span class='fu'>df_stats</span>( ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='kw pkg'>base</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(), <span class='kw'>trimmed_mean</span> <span class='kw'>=</span> <span class='kw pkg'>base</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>0.1</span>))</div><div class='output co'>#&gt;   response     mean trimmed_mean
#&gt; 1       hp 146.6875     141.1923</div><div class='input'>
<span class='co'># force names to by syntactically valid</span>
<span class='fu'>df_stats</span>( ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='kw'>Q</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.25</span>, <span class='fl'>0.75</span>)), <span class='kw'>nice_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;   response Q_25. Q_75.
#&gt; 1       hp  96.5   180</div><div class='input'><span class='co'># longer names</span>
<span class='fu'>df_stats</span>( ~ <span class='no'>hp</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='kw'>trimmed_mean</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>0.1</span>), <span class='st'>"median"</span>, <span class='no'>range</span>,
  <span class='kw'>long_names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;   response  mean_hp trimmed_mean median_hp range_hp_1 range_hp_2
#&gt; 1       hp 146.6875     141.1923       123         52        335</div><div class='input'><span class='co'># wide vs long format</span>
<span class='fu'>df_stats</span>( <span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)</div><div class='output co'>#&gt;   response cyl      mean median range_1 range_2
#&gt; 1       hp   4  82.63636   91.0      52     113
#&gt; 2       hp   6 122.28571  110.0     105     175
#&gt; 3       hp   8 209.21429  192.5     150     335</div><div class='input'><span class='fu'>df_stats</span>( <span class='no'>hp</span> + <span class='no'>wt</span> + <span class='no'>mpg</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)</div><div class='output co'>#&gt;   response cyl       mean  median range_1 range_2
#&gt; 1       hp   4  82.636364  91.000  52.000 113.000
#&gt; 2       hp   6 122.285714 110.000 105.000 175.000
#&gt; 3       hp   8 209.214286 192.500 150.000 335.000
#&gt; 4       wt   4   2.285727   2.200   1.513   3.190
#&gt; 5       wt   6   3.117143   3.215   2.620   3.460
#&gt; 6       wt   8   3.999214   3.755   3.170   5.424
#&gt; 7      mpg   4  26.663636  26.000  21.400  33.900
#&gt; 8      mpg   6  19.742857  19.700  17.800  21.400
#&gt; 9      mpg   8  15.100000  15.200  10.400  19.200</div><div class='input'><span class='fu'>df_stats</span>( <span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='st'>"long"</span>)</div><div class='output co'>#&gt;    response    stat     value
#&gt; 1        hp     cyl   4.00000
#&gt; 2        hp     cyl   6.00000
#&gt; 3        hp     cyl   8.00000
#&gt; 4        hp    mean  82.63636
#&gt; 5        hp    mean 122.28571
#&gt; 6        hp    mean 209.21429
#&gt; 7        hp  median  91.00000
#&gt; 8        hp  median 110.00000
#&gt; 9        hp  median 192.50000
#&gt; 10       hp range_1  52.00000
#&gt; 11       hp range_1 105.00000
#&gt; 12       hp range_1 150.00000
#&gt; 13       hp range_2 113.00000
#&gt; 14       hp range_2 175.00000
#&gt; 15       hp range_2 335.00000</div><div class='input'><span class='co'># More than one grouping variable -- 4 ways.</span>
<span class='fu'>df_stats</span>( <span class='no'>hp</span> ~ <span class='no'>cyl</span> + <span class='no'>gear</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)</div><div class='output co'>#&gt;   response cyl gear     mean median range_1 range_2
#&gt; 1       hp   4    3  97.0000   97.0      97      97
#&gt; 2       hp   6    3 107.5000  107.5     105     110
#&gt; 3       hp   8    3 194.1667  180.0     150     245
#&gt; 4       hp   4    4  76.0000   66.0      52     109
#&gt; 5       hp   6    4 116.5000  116.5     110     123
#&gt; 6       hp   4    5 102.0000  102.0      91     113
#&gt; 7       hp   6    5 175.0000  175.0     175     175
#&gt; 8       hp   8    5 299.5000  299.5     264     335</div><div class='input'><span class='fu'>df_stats</span>( <span class='no'>hp</span> ~ <span class='no'>cyl</span> <span class='kw'>|</span> <span class='no'>gear</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)</div><div class='output co'>#&gt;   response cyl gear     mean median range_1 range_2
#&gt; 1       hp   4    3  97.0000   97.0      97      97
#&gt; 2       hp   6    3 107.5000  107.5     105     110
#&gt; 3       hp   8    3 194.1667  180.0     150     245
#&gt; 4       hp   4    4  76.0000   66.0      52     109
#&gt; 5       hp   6    4 116.5000  116.5     110     123
#&gt; 6       hp   4    5 102.0000  102.0      91     113
#&gt; 7       hp   6    5 175.0000  175.0     175     175
#&gt; 8       hp   8    5 299.5000  299.5     264     335</div><div class='input'><span class='fu'>df_stats</span>( <span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>groups</span> <span class='kw'>=</span> ~<span class='no'>gear</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)</div><div class='output co'>#&gt;   response cyl gear     mean median range_1 range_2
#&gt; 1       hp   4    3  97.0000   97.0      97      97
#&gt; 2       hp   6    3 107.5000  107.5     105     110
#&gt; 3       hp   8    3 194.1667  180.0     150     245
#&gt; 4       hp   4    4  76.0000   66.0      52     109
#&gt; 5       hp   6    4 116.5000  116.5     110     123
#&gt; 6       hp   4    5 102.0000  102.0      91     113
#&gt; 7       hp   6    5 175.0000  175.0     175     175
#&gt; 8       hp   8    5 299.5000  299.5     264     335</div><div class='input'><span class='fu'>df_stats</span>( <span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>gear</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)</div><div class='output co'>#&gt;   response cyl gear     mean median range_1 range_2
#&gt; 1       hp   4    3  97.0000   97.0      97      97
#&gt; 2       hp   6    3 107.5000  107.5     105     110
#&gt; 3       hp   8    3 194.1667  180.0     150     245
#&gt; 4       hp   4    4  76.0000   66.0      52     109
#&gt; 5       hp   6    4 116.5000  116.5     110     123
#&gt; 6       hp   4    5 102.0000  102.0      91     113
#&gt; 7       hp   6    5 175.0000  175.0     175     175
#&gt; 8       hp   8    5 299.5000  299.5     264     335</div><div class='input'>
<span class='co'># because the result is a data frame, df_stats() is also useful for creating plots</span>
<span class='kw'>if</span>(<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>ggformula</span>)) {
  <span class='fu'><a href='https://rdrr.io/pkg/ggformula/man/gf_violin.html'>gf_violin</a></span>(<span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='kw'>group</span> <span class='kw'>=</span> ~ <span class='no'>cyl</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/ggformula/man/gf_point.html'>gf_point</a></span>(<span class='no'>mean</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>df_stats</span>(<span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>mean</span>),
    <span class='kw'>color</span> <span class='kw'>=</span> ~ <span class='st'>"mean"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/ggformula/man/gf_point.html'>gf_point</a></span>(<span class='no'>median</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>df_stats</span>(<span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>, <span class='no'>median</span>),
    <span class='kw'>color</span> <span class='kw'>=</span> ~<span class='st'>"median"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/ggformula/man/gf_aux.html'>gf_labs</a></span>(<span class='kw'>color</span> <span class='kw'>=</span> <span class='st'>""</span>)
}</div><div class='output co'>#&gt; <span class='message'>Loading required package: ggformula</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: ggplot2</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: ggstance</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘ggstance’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:ggplot2’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    geom_errorbarh, GeomErrorbarh</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: scales</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: ggridges</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>New to ggformula?  Try the tutorials: </span>
#&gt; <span class='message'>	learnr::run_tutorial("introduction", package = "ggformula")</span>
#&gt; <span class='message'>	learnr::run_tutorial("refining", package = "ggformula")</span></div><div class='img'><img src='df_stats-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># magrittr style piping is also supported</span>
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>ggformula</span>)) {
  <span class='no'>mtcars</span> <span class='kw'>%&gt;%</span>
    <span class='fu'>df_stats</span>(<span class='no'>hp</span> ~ <span class='no'>cyl</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>)
  <span class='no'>mtcars</span> <span class='kw'>%&gt;%</span>
    <span class='fu'>df_stats</span>(<span class='no'>hp</span> ~ <span class='no'>cyl</span> + <span class='no'>gear</span>, <span class='no'>mean</span>, <span class='no'>median</span>, <span class='no'>range</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/pkg/ggformula/man/gf_point.html'>gf_point</a></span>(<span class='no'>mean</span> ~ <span class='no'>cyl</span>, <span class='kw'>color</span> <span class='kw'>=</span> ~ <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>gear</span>)) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://rdrr.io/pkg/ggformula/man/gf_line.html'>gf_line</a></span>(<span class='no'>mean</span> ~ <span class='no'>cyl</span>, <span class='kw'>color</span> <span class='kw'>=</span> ~ <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>gear</span>))
}</div><div class='img'><img src='df_stats-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># can be used with a categorical response, too</span>
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>mosaic</span>)) {
  <span class='fu'>df_stats</span>(<span class='no'>sex</span> ~ <span class='no'>substance</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='no'>table</span>, <span class='kw'>prop_female</span> <span class='kw'>=</span> <span class='no'>prop</span>)
}</div><div class='output co'>#&gt; <span class='message'>Loading required package: mosaic</span></div><div class='output co'>#&gt; <span class='message'>Registered S3 method overwritten by 'mosaic':</span>
#&gt; <span class='message'>  method                           from   </span>
#&gt; <span class='message'>  fortify.SpatialPolygonsDataFrame ggplot2</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>The 'mosaic' package masks several functions from core packages in order to add </span>
#&gt; <span class='message'>additional features.  The original behavior of these functions should not be affected by this.</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘mosaic’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:dplyr’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    count, do, tally</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:Matrix’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    mean</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:scales’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    rescale</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:ggplot2’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    stat</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,</span>
#&gt; <span class='message'>    quantile, sd, t.test, var</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    max, mean, min, prod, range, sample, sum</span></div><div class='output co'>#&gt;   response substance female male prop_female_prop_female
#&gt; 1      sex   alcohol     36  141               0.2033898
#&gt; 2      sex   cocaine     41  111               0.2697368
#&gt; 3      sex    heroin     30   94               0.2419355</div><div class='input'><span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/library.html'>require</a></span>(<span class='no'>mosaic</span>)) {
  <span class='fu'>df_stats</span>(<span class='no'>sex</span> ~ <span class='no'>substance</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HELPrct</span>, <span class='no'>table</span>, <span class='no'>props</span>)
}</div><div class='output co'>#&gt;   response substance female male prop_female prop_male
#&gt; 1      sex   alcohol     36  141   0.2033898 0.7966102
#&gt; 2      sex   cocaine     41  111   0.2697368 0.7302632
#&gt; 3      sex    heroin     30   94   0.2419355 0.7580645</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Randall Pruim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


